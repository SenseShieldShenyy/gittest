

#  操作系统

##  导论

1. 操作系统的目的

   ![1615196979945](G:\code\note\操作系统\1615196979945.png)

 2. 现代计算机组成：

    ![1615197180885](G:\code\note\操作系统\1615197180885.png)

    

	3. 多道程序设计：进程1 在进行io 的时候讲cpu 給进程2 使用

    分时技术：在用户察觉不到的时间间隙内去响应不同的用户。单位时间分成多个时间片，給每个进程分一个时间片。

    并行是连续的

    并发的是间断的，在多核系统中并行和并发是混和在一起的。

    ![1615198828379](G:\code\note\操作系统\1615198828379.png)

	4. 操作系统操作和功能

    	1. ![1615254902693](G:\code\note\操作系统\1615254902693.png)

##  操作系统结构

1. 操作系统服务和接口

   ![1615255968364](C:\Users\shenyy\AppData\Roaming\Typora\typora-user-images\1615255968364.png)

   1. 系统调用一般用高级语言调用。调api 的本质就是执行系统调用

      ![1615255320053](G:\code\note\操作系统\1615255320053.png)

      

2. 操作系统结构
   1. 简单结构。MS DOS : BIOS 和应用程序之间
   2. 层次结构，每层只能调用下层，下层为上层屏蔽其他层。
   3. 模块化结构: 不同模块通过接口调用
   4. 混合结构
   5. 微内核
3. 虚拟机：逻辑计算机
   1. 高级语言虚拟机
   2. 工作站虚拟机：多个操作系统一个物理虚拟机
   3. 服务器虚拟机：多用户、多系统

##  进程

1. 进程概念

   ![1615257585358](G:\code\note\操作系统\1615257585358.png)

   ![1615257687114](G:\code\note\操作系统\1615257687114.png)

2. 进程操作
   1. 进程创建。
      1. ![1615258116565](G:\code\note\操作系统\1615258116565.png)
   2. 进程终止
      1. ![1615338146541](G:\code\note\操作系统\1615338146541.png)
         2. windows 进程操作
            1. 进程创建 CreateProcess
               1. 继承 文件句柄、对象句柄、环境变量、目录、终端、进程组
               2. 不继承：优先权类、内存句柄、DLL模块句柄
            2. 进程退出:ExitProcess 和 TerminateProcess
            3. 等待子进程结束：Wait for Single Object
               1. 自己终止进程 ExitProcess()
                  1. C程序中exit() 会自动清除一些垃圾之后，再调用ExitProcess()
               2. 一个进程A想要终止另外一个进程B，可以在取得B进程的句柄B的句柄之后调用TerminateProcess()
         3. Linux 进程操作
            1. 进程创建
               1. #include <unistd.h>
               2. pid_t fork();
               3. 进程调用fork之后会创建一个子进程，这子进程和父进程的ID不同
            2. 执行其他程序
               1. 使用exec族
            3. 等待进程
               1. 父进程阻塞知道子任务完成
               2. 调用Wait 或者 waitpid 系统调用